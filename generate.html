<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GS1 QR Generator & Data Entry</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- QRCode.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <style>
    body { font-size: 0.9rem; }
    .sidebar { height: 100vh; background-color: #f8f9fa; }
    .accordion-button.disabled { pointer-events: none; opacity: 0.6; }
  </style>
</head>
<script>
    if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
    }
</script>
<body>

<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">GS1 QR System</span>
        <a class="btn btn-outline-light btn-sm" href="dashboard.html">Back to Dashboard</a>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 d-md-block sidebar collapse">
            <div class="position-sticky p-3">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#">Generate QR / Data Entry</a></li>
                    <li class="nav-item"><a class="nav-link" href="scan.html">Scan QR</a></li>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <h2 class="mt-4">GS1 QR Generator & Data Entry</h2>
            <p class="text-muted">Stepwise entry of Main, Export Carton, Master, and Inner Pack details to generate QR codes</p>
            <button type="button" class="btn btn-warning ms-2" onclick="newBooking()">New Booking</button>
            <div class="accordion mt-4" id="dataAccordion">

                <!-- Main Details -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingMain">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMain">
                            Main Details
                        </button>
                    </h2>
                    <div id="collapseMain" class="accordion-collapse collapse show" data-bs-parent="#dataAccordion">
                        <div class="accordion-body">
                            <form id="mainForm">
                                <div class="row mb-3">
                                    <div class="col-md-3 mb-3">
                                        <label>Booking ID</label>
                                        <input type="text" id="bookingId" class="form-control" required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>Customer Name</label>
                                        <input type="text" id="customerName" class="form-control" required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>Address</label>
                                        <input type="text" id="address" class="form-control" required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>TP No</label>
                                        <input type="text" id="tpNo" class="form-control" required>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-3 mb-3">
                                        <label>Email</label>
                                        <input type="email" id="email" class="form-control">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>Phone</label>
                                        <input type="text" id="phone" class="form-control">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>Order Date</label>
                                        <input type="date" id="orderDate" class="form-control">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label>Delivery Date</label>
                                        <input type="date" id="deliveryDate" class="form-control">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6 mb-3">
                                        <label>Notes</label>
                                        <textarea id="notes" class="form-control"></textarea>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-primary" onclick="validateMainDetails()">Save & Continue</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Export Carton -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingCarton">
                        <button class="accordion-button collapsed disabled" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCarton" id="cartonTab">
                            Export Carton Details
                        </button>
                    </h2>
                    <div id="collapseCarton" class="accordion-collapse collapse" data-bs-parent="#dataAccordion">
                        <div class="accordion-body">
                            <table class="table table-bordered" id="cartonTable">
                                <thead>
                                    <tr>
                                        <th>Carton ID (editable)</th>
                                        <th>Booking ID</th>
                                        <th>No of Master Carton Pack</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <button class="btn btn-success btn-sm" onclick="addCartonRow()">Add Export Carton</button>
                        </div>
                    </div>
                </div>

                <!-- Master Carton -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingMaster">
                        <button class="accordion-button collapsed disabled" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMaster" id="masterTab">
                            Master Carton Details
                        </button>
                    </h2>
                    <div id="collapseMaster" class="accordion-collapse collapse" data-bs-parent="#dataAccordion">
                        <div class="accordion-body">
                            <table class="table table-bordered" id="masterTable">
                                <thead>
                                    <tr>
                                        <th>Master Carton ID</th>
                                        <th>Parent Export Carton</th>
                                        <th>Booking ID</th>
                                        <th>No of Inner Pack</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <button class="btn btn-success btn-sm" onclick="addMasterRow()">Add Master Carton</button>
                        </div>
                    </div>
                </div>

                <!-- Inner Pack -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingInner">
                        <button class="accordion-button collapsed disabled" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInner" id="innerTab">
                            Inner Pack Details
                        </button>
                    </h2>
                    <div id="collapseInner" class="accordion-collapse collapse" data-bs-parent="#dataAccordion">
                        <div class="accordion-body">
                            <table class="table table-bordered" id="innerTable">
                                <thead>
                                    <tr>
                                        <th>Inner Pack ID</th>
                                        <th>Parent Master Carton</th>
                                        <th>Booking ID</th>
                                        <th>Size</th>
                                        <th>Expiry Date</th>
                                        <th>MFD Date</th>
                                        <th>Net Weight</th>
                                        <th>Gross Weight</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <button class="btn btn-success btn-sm" onclick="addInnerRow()">Add Inner Pack</button>
                        </div>
                    </div>
                </div>

                <!-- QR Code -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingQR">
                        <button class="accordion-button collapsed disabled" type="button" data-bs-toggle="collapse" data-bs-target="#collapseQR" id="qrTab">
                            Generate QR Codes
                        </button>
                    </h2>
                    <div class="accordion-collapse collapse" id="collapseQR" data-bs-parent="#dataAccordion">
                        <div class="accordion-body text-center">
                            <div class="mb-3">
                                <label for="qrSize">QR Code Size:</label>
                                <select id="qrSize" class="form-select" style="width: 120px; display: inline-block; margin-left: 10px;">
                                    <option value="100">100 px</option>
                                    <option value="150" selected>150 px</option>
                                    <option value="200">200 px</option>
                                    <option value="250">250 px</option>
                                </select>
                                <button class="btn btn-primary" onclick="generateGS1QR()">Generate QR & ZIP</button>
                            </div>
                            <div id="qrOutput" class="mt-3"></div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script src="./js/dataEntry.js"></script>
<script src="./js/generateGS1.js"></script>
</body>
</html>
